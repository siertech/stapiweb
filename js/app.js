"use strict";!function(){angular.module("stApi").config(function($routeProvider,$httpProvider){$routeProvider.when("/cliente",{templateUrl:"app/cliente/html/list.html",controller:"listClienteController",controllerAs:"vm"})})}(),function(){angular.module("stApi").controller("detalheClienteController",function(stService,stUtil,$modalInstance,item,callback){var vm=this;vm.item=item||{},vm.salvandoItem=!1,vm.salvarItem=function(){var _item=vm.item;vm.salvandoItem=!0,stService.save("cliente",_item).success(function(data){vm.item=data.item,vm.salvandoItem=!1,stUtil.showMessage("","Salvo com sucesso","info"),callback("add",$modalInstance)}).error(function(){vm.salvandoItem=!1,stUtil.showMessage("","Ocorreu um erro","danger"),callback("add-error",$modalInstance)})},vm.deletarItem=function(){stService["delete"]("cliente",[vm.item.id]).success(function(){stUtil.showMessage("","Item deletado com sucesso","info"),callback("delete",$modalInstance)}).error(function(){stUtil.showMessage("","Ocorreu um erro ao deletar","danger"),callback("delete-error",$modalInstance)})}}).controller("listClienteController",function(clienteUtil,stService,$route,stUtil,$scope){var vm=this;vm.openItem=function(item){clienteUtil.openItem(item,function(event,modal){modal.close(),$route.reload()})},vm.deletarItem=function(item){stService["delete"]("cliente",[item.id]).success(function(){stUtil.showMessage("","Item deletado com sucesso","info"),$route.reload()}).error(function(){stUtil.showMessage("","Ocorreu um erro ao deletar","danger")})}})}(),function(){angular.module("stApi").factory("clienteUtil",function($uibModal){var _openItem=function(item,callback){$uibModal.open({animation:!0,templateUrl:"app/cliente/html/detalhe.html",size:"lg",controllerAs:"vm",controller:"detalheClienteController",resolve:{item:function(){return item},callback:function(){return callback}}})};return{openItem:_openItem}})}(),function(){angular.module("stApi").directive("clienteGridView",function(){return{restrict:"E",templateUrl:"app/cliente/html/gridView.html",scope:{objetos:"=",editFunction:"=",deleteFunction:"="},controllerAs:"vm",bindToController:!0,controller:function(){}}}).directive("clienteTableView",function(){return{restrict:"E",templateUrl:"app/cliente/html/tableView.html",scope:{objetos:"=",editFunction:"=",deleteFunction:"="},controllerAs:"vm",bindToController:!0,controller:function(){}}}).directive("clienteForm",function(){return{restrict:"E",templateUrl:"app/cliente/html/form.html",scope:{item:"="},controllerAs:"vm",bindToController:!0,controller:function(){}}})}(),function(){angular.module("stApi").config(function($routeProvider,$httpProvider){$routeProvider.when("/io",{templateUrl:"app/io/html/list.html",controller:function(ioUtil,stService,$route,stUtil,$scope){$scope.openItem=function(item){ioUtil.openItem(item,function(event,modal){modal.close(),$route.reload()})},$scope.deletarItem=function(item){stService.executePost("io/delete/",[item.id]).success(function(){stUtil.showMessage("","Item deletado com sucesso","info"),$route.reload()}).error(function(){stUtil.showMessage("","Ocorreu um erro ao deletar","danger")})}}})})}(),function(){angular.module("stApi").factory("ioUtil",function($uibModal){var _openItem=function(item,callback){$uibModal.open({animation:!0,templateUrl:"app/io/html/detalhe.html",size:"lg",controllerAs:"vm",controller:function(stService,stUtil,$modalInstance,$route){var vm=this;vm.item=item||{},vm.salvandoItem=!1,vm.salvarItem=function(){var _item=vm.item;vm.salvandoItem=!0,stService.executePost("io/add/",_item).success(function(data){vm.item=data.item,vm.salvandoItem=!1,stUtil.showMessage("","Salvo com sucesso","info"),callback("add",$modalInstance)}).error(function(){vm.salvandoItem=!1,stUtil.showMessage("","Ocorreu um erro","danger"),callback("add-error",$modalInstance)})},vm.deletarItem=function(){stService.executePost("io/delete/",[vm.item.id]).success(function(){stUtil.showMessage("","Item deletado com sucesso","info"),callback("delete",$modalInstance)}).error(function(){stUtil.showMessage("","Ocorreu um erro ao deletar","danger"),callback("delete-error",$modalInstance)})}}})};return{openItem:_openItem}})}(),function(){angular.module("stApi").config(function($routeProvider,$httpProvider){$routeProvider.when("/op",{templateUrl:"app/op/html/list.html",controller:function(opUtil,stService,$route,stUtil,$scope){$scope.openItem=function(item){opUtil.openItem(item,function(event,modal){modal.close(),$route.reload()})},$scope.deletarItem=function(item){stService.executePost("op/delete/",[item.id]).success(function(){stUtil.showMessage("","Item deletado com sucesso","info"),$route.reload()}).error(function(){stUtil.showMessage("","Ocorreu um erro ao deletar","danger")})}}})})}(),function(){angular.module("stApi").factory("opUtil",function($uibModal){var _openItem=function(item,callback){$uibModal.open({animation:!0,templateUrl:"app/op/html/detalhe.html",size:"lg",controllerAs:"vm",controller:function(stService,stUtil,$modalInstance,$route){var vm=this;vm.item=item||{},vm.salvandoItem=!1,vm.salvarItem=function(){var _item=vm.item;vm.salvandoItem=!0,stService.executePost("op/add/",_item).success(function(data){vm.item=data.item,vm.salvandoItem=!1,stUtil.showMessage("","Salvo com sucesso","info"),callback("add",$modalInstance)}).error(function(){vm.salvandoItem=!1,stUtil.showMessage("","Ocorreu um erro","danger"),callback("add-error",$modalInstance)})},vm.deletarItem=function(){stService.executePost("op/delete/",[vm.item.id]).success(function(){stUtil.showMessage("","Item deletado com sucesso","info"),callback("delete",$modalInstance)}).error(function(){stUtil.showMessage("","Ocorreu um erro ao deletar","danger"),callback("delete-error",$modalInstance)})}}})};return{openItem:_openItem}})}(),function(){angular.module("stApi").controller("changePasswordController",function($rootScope,$scope,stService,$cookieStore,$location,st,$localStorage,stUtil,configUtil){$scope.usuarioSistema=$cookieStore.get("usuarioSistema"),$scope.lembrarSenha=!0,$scope.alterarSenha=function(usuarioSistema){return!usuarioSistema.senha||usuarioSistema.senha.length<4?void stUtil.showMessage("","A senha deve ter pelo menos 4 caracteres.","danger"):void stService.save("operadorsistema",usuarioSistema).success(function(){st.leadEvt({descricao:"usuario_mudou_senha"}),configUtil.setConfig("mudouSenha","true",function(){$localStorage.senha=usuarioSistema.senha,$location.path("/inicio")})}).error(function(){st.evt({evento:"erro_mudar_senha"}),stUtil.showMessage("","Ocorreu um erro, tente novamente","danger")})}})}(),function(){angular.module("stApi").config(function($routeProvider,$httpProvider){$routeProvider.when("/login",{templateUrl:"app/login/html/login.html",controller:"loginController",resolve:{demo:function(){return{}},redirect:function(){}}}),$routeProvider.when("/cadastro/:login",{templateUrl:"app/login/html/cadastroUsuario.html",resolve:{cadastrarUsuario:function(loginUtil,$route,$rootScope,$localStorage,stService,st,$cookieStore,$location){var login=$route.current.params.login;stService.executeGet("cadastrar-usuario",{login:login}).success(function(){$localStorage.empresa=login,$localStorage.usuario=login,$localStorage.senha="123",$location.path("login")}).error(function(){})}}})})}(),function(){angular.module("stApi").controller("loginController",function(demo,$scope,$location,$rootScope,$localStorage,$cookieStore,loginUtil,stUtil,redirect,st,config){$scope.carregando=!1,$scope.lembrarSenha=!0,$rootScope.usuarioSistema||($rootScope.usuarioSistema=$cookieStore.get("usuarioSistema")),$scope.lembrarSenhaUsuario=function(){loginUtil.openLembrarSenha()},$scope.logar=function(login,lembrarSenha){return login.empresa="admin",login.usuario?login.senha?($scope.carregando=!0,void loginUtil.logar(login,lembrarSenha,function(loginData){$scope.carregando=!1,loginData?(console.log("Usuário logado com sucesso!"),$location.path(config.paginaInicial||"/inicio")):($scope.login.senha="",delete $localStorage.senha,stUtil.showMessage("","Ocorreu um erro ao realizar login, tente novamente","danger"))})):void stUtil.showMessage("","Informe a senha","danger"):void stUtil.showMessage("","Informe o Usuário","danger")},$scope.logOut=function(){loginUtil.logOut(),$location.path("/login")},demo.usuario?($scope.login={empresa:demo.empresa,usuario:demo.usuario,senha:demo.senha},$scope.logar($scope.login)):($scope.login={empresa:$localStorage.empresa,usuario:$localStorage.usuario,senha:$localStorage.senha},$scope.existeEmpresa=!1),$localStorage.usuario&&$localStorage.senha&&$scope.logar($scope.login,!0)})}(),function(){angular.module("stApi").controller("inicioController",function($scope){$scope.clienteData={_string:{nome:"Paulo Freitas",tipo:"Pessoa"},_double:{},_int:{},idFilial:1,idOperador:1,allFilials:!1,disable:0,id:39,historicoObjeto:"Criado em 26/03/2018 as 15:09:04 por 'Admin',Editado em 26/03/2018 as 19:18:04 por 'Admin'",dataCadastro:"2018-03-26",endereco:"Paulo Afosono"},$scope.stepsMenu=[{title:"Seja bem vindo ao CeasaPlus!",position:"bottom",description:"Este é o menu com todas as opções do sistema.",attachTo:"#button-menu-mobile",arrowClass:"onboarding-button-menu-arrow",doneButtonText:"OK",showPreviousButton:!1,overlayOpacity:0,xOffset:45,yOffset:30}]})}(),function(){angular.module("stApi").config(function($routeProvider,$httpProvider){$routeProvider.when("/inicio",{templateUrl:"app/inicio/html/inicio.html",controller:"inicioController"})})}();