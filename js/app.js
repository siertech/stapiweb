"use strict";!function(){angular.module("adm").config(function($routeProvider,$httpProvider){$routeProvider.when("/testeentidade",{templateUrl:"app/testeentidade/html/list.html",controller:function(testeentidadeUtil,stService,$route,stUtil,$scope){$scope.openItem=function(item){testeentidadeUtil.openItem(item,function(event,modal){modal.close(),$route.reload()})},$scope.deletarItem=function(item){stService.executePost("testeentidade/delete/",[item.id]).success(function(){stUtil.showMessage("","Item deletado com sucesso","info"),$route.reload()}).error(function(){stUtil.showMessage("","Ocorreu um erro ao deletar","danger")})}}})})}(),function(){angular.module("adm").factory("testeentidadeUtil",function($uibModal){var _openItem=function(item,callback){$uibModal.open({animation:!0,templateUrl:"app/testeentidade/html/detalhe.html",size:"lg",controllerAs:"vm",controller:function(stService,stUtil,$modalInstance,$route){var vm=this;vm.item=item||{},vm.salvandoItem=!1,vm.salvarItem=function(){var _item=vm.item;vm.salvandoItem=!0,stService.executePost("testeentidade/add/",_item).success(function(data){vm.item=data.item,vm.salvandoItem=!1,stUtil.showMessage("","Salvo com sucesso","info"),callback("add",$modalInstance)}).error(function(){vm.salvandoItem=!1,stUtil.showMessage("","Ocorreu um erro","danger"),callback("add-error",$modalInstance)})},vm.deletarItem=function(){stService.executePost("testeentidade/delete/",[vm.item.id]).success(function(){stUtil.showMessage("","Item deletado com sucesso","info"),callback("delete",$modalInstance)}).error(function(){stUtil.showMessage("","Ocorreu um erro ao deletar","danger"),callback("delete-error",$modalInstance)})}}})};return{openItem:_openItem}})}(),function(){angular.module("adm").controller("changePasswordController",function($rootScope,$scope,stService,$cookieStore,$location,st,$localStorage,stUtil,configUtil){$scope.usuarioSistema=$cookieStore.get("usuarioSistema"),$scope.lembrarSenha=!0,$scope.alterarSenha=function(usuarioSistema){return!usuarioSistema.senha||usuarioSistema.senha.length<4?void stUtil.showMessage("","A senha deve ter pelo menos 4 caracteres.","danger"):void stService.save("operadorsistema",usuarioSistema).success(function(){st.leadEvt({descricao:"usuario_mudou_senha"}),configUtil.setConfig("mudouSenha","true",function(){$localStorage.senha=usuarioSistema.senha,$location.path("/inicio")})}).error(function(){st.evt({evento:"erro_mudar_senha"}),stUtil.showMessage("","Ocorreu um erro, tente novamente","danger")})}})}(),function(){angular.module("adm").config(function($routeProvider,$httpProvider){$routeProvider.when("/login",{templateUrl:"app/login/html/login.html",controller:"loginController",resolve:{demo:function(){return{}},redirect:function(){}}}),$routeProvider.when("/cadastro/:login",{templateUrl:"app/login/html/cadastroUsuario.html",resolve:{cadastrarUsuario:function(loginUtil,$route,$rootScope,$localStorage,stService,st,$cookieStore,$location){var login=$route.current.params.login;stService.executeGet("cadastrar-usuario",{login:login}).success(function(){$localStorage.empresa=login,$localStorage.usuario=login,$localStorage.senha="123",$location.path("login")}).error(function(){})}}})})}(),function(){angular.module("adm").controller("loginController",function(demo,$scope,$location,$rootScope,$localStorage,$cookieStore,loginUtil,stUtil,redirect,st,config){$scope.carregando=!1,$scope.lembrarSenha=!0,$rootScope.usuarioSistema||($rootScope.usuarioSistema=$cookieStore.get("usuarioSistema")),$scope.lembrarSenhaUsuario=function(){loginUtil.openLembrarSenha()},$scope.logar=function(login,lembrarSenha){return login.empresa="admin",login.usuario?login.senha?($scope.carregando=!0,void loginUtil.logar(login,lembrarSenha,function(loginData){$scope.carregando=!1,loginData?(console.log("Usuário logado com sucesso!"),$location.path(config.info.$$paginaInicial||"/inicio")):($scope.login.senha="",delete $localStorage.senha,stUtil.showMessage("","Ocorreu um erro ao realizar login, tente novamente","danger"))})):void stUtil.showMessage("","Informe a senha","danger"):void stUtil.showMessage("","Informe o Usuário","danger")},$scope.logOut=function(){loginUtil.logOut(),$location.path("/login")},demo.usuario?($scope.login={empresa:demo.empresa,usuario:demo.usuario,senha:demo.senha},$scope.logar($scope.login)):($scope.login={empresa:$localStorage.empresa,usuario:$localStorage.usuario,senha:$localStorage.senha},$scope.existeEmpresa=!1),$localStorage.usuario&&$localStorage.senha&&$scope.logar($scope.login,!0)})}(),function(){angular.module("adm").controller("inicioController",function($scope){})}(),function(){angular.module("adm").config(function($routeProvider,$httpProvider){$routeProvider.when("/inicio",{templateUrl:"app/inicio/html/inicio.html",controller:"inicioController"})})}();